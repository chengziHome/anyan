
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WS-test</title>
</head>
<body>
<input id="content" type="text" value="" >
<button id="ws">send</button>
<div id="imgDiv" style="border: 1px solid red;">

</div>

<script src="/lib/js/jquery.min.js"></script>
<script type="text/javascript">
    $("#content").attr("disabled", false);
    socket = new WebSocket('ws://localhost:8082/')
    socket.onopen = function (ev) { 
        console.log("connected...");
    }
    socket.onmessage = function (evt) {
        console.log("type:"+typeof(evt.data));
        if(typeof(evt.data)=="string"){
            console.log("str:"+evt.data);
        }else{
            var reader = new FileReader();
            reader.onload = function(evt){
                if(evt.target.readyState == FileReader.DONE){
                    var url = evt.target.result;
                    console.log(url);
                    var img = document.getElementById("imgDiv");
                    img.innerHTML = "<img src = "+url+" />";
                }
            }
            reader.readAsDataURL(evt.data);
        }
    }
    socket.onclose = function(ev){
        console.log("connected close");
    }
    $('#ws').click(function () {
        socket.send($('#content').val());
    });
</script>
</body>
</html>